<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>User Interactions - Draw tool to draw geometries</title>
<style type="text/css">
    html,
    body {
        margin: 0px;
        height: 100%;
        width: 100%
    }

    .container {
        width: 100%;
        height: 100%
    }
</style>
<link rel='stylesheet' href='./../assets/lib/maptalks/maptalks.css' />

<script type='text/javascript' src='./../assets/lib/maptalks/maptalks-gl.js'></script>
<script type='text/javascript' src='./../assets/lib/maptalks.tileclip.js'></script>


<body>

    <div id="map" class="container"></div>

    <script>

        const spatialReference = {
            projection: {
                code: "EPSG:9807",
                // zone: 51,
                // code: 'utm',
                falseEasting: 350000,
                falseNorthing: -2800000,
                scaleFactor: 1,
                centralMeridian: 120.7833333333333,
                latitudeOfOrigin: 0,
            },
            resolutions: (function () {
                // let res = Math.pow(2, 8);
                const RES = 156367.78906250003;

                const resolutions = [];
                for (let i = 0; i <= 20; i++) {
                    resolutions.push(RES / Math.pow(2, i));
                }
                // for (let i = 0; i < 23; i++) {
                //     resolutions[i] = res;
                //     res *= 0.5;
                // }
                return resolutions;
            })(),
            fullExtent: {
                left: -38219.52622692019,
                bottom: 545398.8815674061,
                right: 882668.8582661198,
                top: 913228.7641038558,
            },
        };

        const baseLayer = new maptalks.TileLayer('base0', {
            tileSystem: [1, -1, -5273200, 7202100],
            spatialReference,
            decodeImageInWorker: true,
            fetchOptions: {
                headers: {
                    token1: '111',
                    'accept': 'image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',
                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.26'
                }

            },
            // offset,
            urlTemplate: "./../assets/data/suzhou-yuanqu-tiles/{z}/{x}/{y}.png",
        })





        var map = new maptalks.Map('map', {
            zoomControl: true,
            spatialReference,
            "center": [120.54991929, 31.26912119], "zoom": 9.272537688043863, "pitch": 0, "bearing": 0
        });

        baseLayer.addTo(map);




    </script>
</body>

</html>